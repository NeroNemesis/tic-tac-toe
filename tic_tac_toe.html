<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TIC TAC TOE</title>
    <style>
        #jeu /*customizing the main box*/
        {
            width: 250px;
            height: 250px;
            background:#000;
            border: 1px solid #777;
            margin: 50px auto;
            box-shadow : 3px 8px 3px #777 ;
            padding: 10px;
            overflow: auto;
        }

        #jeu div /*width and height 
                 for the in-line elements */
        {
            width: 190px;
            margin: auto;
            clear: both;
        }

        #jeu button /*customizing the squares*/
        {
            width: 50px;
            height: 50px;
            margin: 5px;
            float: left;
            font-weight: bold;
        }

        #gameStatus /*result shower*/
        {
            color :white;
            padding: 15px 10px;
        }
    </style>
</head>
<body>
    <!-- Our diiferent squares -->
    <div id="jeu">

        <div>
            <button></button>
            <button></button>
            <button></button>
        </div>
        <div><button></button>
            <button></button>
            <button></button>
        </div>
        <div>
            <button></button>
            <button></button>
            <button></button>
        </div>

        <!-- To display who is playing and result -->
        <div id="gameStatus"></div>

    </div>

    <script type="text/javascript">

        function isValid(button){ //checks if a square has been used already
            return button.innerHTML.length==0;
        }

        function setSymbol(butt, symbol){ //set the symbol of the player who clicked in the square
            butt.innerHTML=symbol;
        }

        function searchWinner(pawn, players, whoPlays){ //checking all the possibilities to know wo wins
            if( pawn[0].innerHTML == players[whoPlays] &&
                pawn[1].innerHTML == players[whoPlays] &&
                pawn[2].innerHTML == players[whoPlays] )
                return true;
            
            if( pawn[3].innerHTML == players[whoPlays] &&
                pawn[4].innerHTML == players[whoPlays] &&
                pawn[5].innerHTML == players[whoPlays] )
                return true;

            if( pawn[6].innerHTML == players[whoPlays] &&
                pawn[7].innerHTML == players[whoPlays] &&
                pawn[8].innerHTML == players[whoPlays] )
                return true;
            
            if( pawn[0].innerHTML == players[whoPlays] &&
                pawn[3].innerHTML == players[whoPlays] &&
                pawn[6].innerHTML == players[whoPlays] )
                return true;

            if( pawn[1].innerHTML == players[whoPlays] &&
                pawn[4].innerHTML == players[whoPlays] &&
                pawn[7].innerHTML == players[whoPlays] )
                return true;

            if( pawn[2].innerHTML == players[whoPlays] &&
                pawn[5].innerHTML == players[whoPlays] &&
                pawn[8].innerHTML == players[whoPlays] )
                return true;

            if( pawn[0].innerHTML == players[whoPlays] &&
                pawn[4].innerHTML == players[whoPlays] &&
                pawn[8].innerHTML == players[whoPlays] )
                return true;

            if( pawn[2].innerHTML == players[whoPlays] &&
                pawn[4].innerHTML == players[whoPlays] &&
                pawn[6].innerHTML == players[whoPlays] )
                return true;
            
        }

        class Display { /*takes de text from var display and shows it in #gameStatus*/
            constructor(element){
                var displayer = element;
            
                function setText(message) {
                    displayer.innerHTML =message;

                }

                return{sendMessage : setText}; /*returning and interface*/
            }
        }

        function main(){

            /*will contain the values in our squares*/
            var pawn = document.
            querySelectorAll("#jeu button"); /*creationg and array
                                            made up of all the squares*/
            
            var players = ['X','O']; /*list of players*/
            var whoPlays =0; /*0 or 1 depending on who plays*/
            var gameOver = false;
            var display = new Display(document.
            querySelector("#gameStatus"));

            display.sendMessage("Let's start the game.<br/> Player " + players[whoPlays] + " it's your turn.");

            for(var i=0, len=pawn.length; i<len; i++){
                pawn[i].addEventListener("click",function(){
                   
                    if(gameOver) /*check if somone won*/
                        return;
                    
                        if(!isValid(this)){ /*check if the square is not already selected */
                            display.sendMessage("Invalid move !");
                        }else{
                            setSymbol(this, players[whoPlays]);
                            gameOver = searchWinner(pawn,players,whoPlays);

                            //Game over (someone won)
                            if(gameOver){
                               display.sendMessage("Player" + players[whoPlays] + " won !!!");
                               return;
                            }
                            //GameOver (draw)

                            //Game not over yet
                            whoPlays++, //if 0 goes to 1 if 1 goes to 2 then 2%2=0
                            whoplays%=2;

                            display.sendMessage("Player " + players[whoPlays] + " it's your turn");
                        }

                }); 
            }

        };

        main();
    </script>
</body>
</html>